import{t as e}from"./activity-Cumi4Ro-.js";import{n as t,r as n,t as r}from"./Cards-DJIlPtyz.js";import{a as i,c as a,f as o,h as s,l as c,n as l,o as u,r as d,s as f,u as p}from"./index-CFcn8IfB.js";var m=u(`boxes`,[[`path`,{d:`M2.97 12.92A2 2 0 0 0 2 14.63v3.24a2 2 0 0 0 .97 1.71l3 1.8a2 2 0 0 0 2.06 0L12 19v-5.5l-5-3-4.03 2.42Z`,key:`lc1i9w`}],[`path`,{d:`m7 16.5-4.74-2.85`,key:`1o9zyk`}],[`path`,{d:`m7 16.5 5-3`,key:`va8pkn`}],[`path`,{d:`M7 16.5v5.17`,key:`jnp8gn`}],[`path`,{d:`M12 13.5V19l3.97 2.38a2 2 0 0 0 2.06 0l3-1.8a2 2 0 0 0 .97-1.71v-3.24a2 2 0 0 0-.97-1.71L17 10.5l-5 3Z`,key:`8zsnat`}],[`path`,{d:`m17 16.5-5-3`,key:`8arw3v`}],[`path`,{d:`m17 16.5 4.74-2.85`,key:`8rfmw`}],[`path`,{d:`M17 16.5v5.17`,key:`k6z78m`}],[`path`,{d:`M7.97 4.42A2 2 0 0 0 7 6.13v4.37l5 3 5-3V6.13a2 2 0 0 0-.97-1.71l-3-1.8a2 2 0 0 0-2.06 0l-3 1.8Z`,key:`1xygjf`}],[`path`,{d:`M12 8 7.26 5.15`,key:`1vbdud`}],[`path`,{d:`m12 8 4.74-2.85`,key:`3rx089`}],[`path`,{d:`M12 13.5V8`,key:`1io7kd`}]]),h=u(`chevron-right`,[[`path`,{d:`m9 18 6-6-6-6`,key:`mthhwq`}]]),g=u(`hammer`,[[`path`,{d:`m15 12-9.373 9.373a1 1 0 0 1-3.001-3L12 9`,key:`1hayfq`}],[`path`,{d:`m18 15 4-4`,key:`16gjal`}],[`path`,{d:`m21.5 11.5-1.914-1.914A2 2 0 0 1 19 8.172v-.344a2 2 0 0 0-.586-1.414l-1.657-1.657A6 6 0 0 0 12.516 3H9l1.243 1.243A6 6 0 0 1 12 8.485V10l2 2h1.172a2 2 0 0 1 1.414.586L18.5 14.5`,key:`15ts47`}]]),_=u(`target`,[[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}],[`circle`,{cx:`12`,cy:`12`,r:`6`,key:`1vlfrh`}],[`circle`,{cx:`12`,cy:`12`,r:`2`,key:`1c9p78`}]]),v=u(`zap`,[[`path`,{d:`M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z`,key:`1xq2db`}]]),y=s(o(),1),b=c(),x=y.memo(({tagItem:e,onEdit:t,skidOptions:n,almacenOptions:r,isReadOnly:i})=>{let a=`hover:bg-slate-50`;e.calculatedStatus===`INSTALADO`?a=`bg-green-50/60`:e.calculatedStatus===`EN PROCESO`&&(a=`bg-yellow-50/60`);let o=`border border-slate-200 rounded px-1 py-0.5 text-xs w-full text-center outline-none focus:ring-1 focus:ring-blue-500 disabled:bg-transparent disabled:border-none disabled:text-slate-500`,s=`border border-slate-200 rounded px-1 py-0.5 text-xs w-full outline-none focus:ring-1 focus:ring-blue-500 bg-white cursor-pointer disabled:bg-transparent disabled:border-none disabled:appearance-none`;return(0,b.jsxs)(`tr`,{className:`border-b border-slate-100 transition-colors ${a}`,children:[(0,b.jsx)(`td`,{className:`px-4 py-2 font-medium text-slate-800 w-32 text-xs`,children:e.tag}),(0,b.jsx)(`td`,{className:`px-4 py-2 text-slate-500 text-[10px] truncate max-w-[150px]`,title:e.desc,children:e.desc}),(0,b.jsx)(`td`,{className:`px-1 py-1 w-16`,children:(0,b.jsx)(`input`,{disabled:i,type:`number`,min:`0`,max:`100`,className:o,value:e.avCons,onChange:n=>t(e.tag,`avCons`,n.target.value),placeholder:`0%`})}),(0,b.jsx)(`td`,{className:`px-1 py-1 w-24`,children:(0,b.jsx)(`input`,{disabled:i,type:`date`,className:o,value:e.fCons,onChange:n=>t(e.tag,`fCons`,n.target.value)})}),(0,b.jsx)(`td`,{className:`px-1 py-1 w-16`,children:(0,b.jsx)(`input`,{disabled:i,type:`number`,min:`0`,max:`100`,className:o,value:e.avQa,onChange:n=>t(e.tag,`avQa`,n.target.value),placeholder:`0%`})}),(0,b.jsx)(`td`,{className:`px-1 py-1 w-24`,children:(0,b.jsx)(`input`,{disabled:i,type:`date`,className:o,value:e.fQa,onChange:n=>t(e.tag,`fQa`,n.target.value)})}),(0,b.jsx)(`td`,{className:`px-1 py-1 w-24`,children:(0,b.jsx)(`input`,{disabled:i,type:`date`,className:o,value:e.fRec,onChange:n=>t(e.tag,`fRec`,n.target.value)})}),(0,b.jsx)(`td`,{className:`px-1 py-1 w-24`,children:(0,b.jsx)(`input`,{disabled:i,type:`date`,className:o,value:e.fEnt,onChange:n=>t(e.tag,`fEnt`,n.target.value)})}),(0,b.jsx)(`td`,{className:`px-1 py-1 w-20`,children:(0,b.jsxs)(`select`,{disabled:i,className:s,value:e.skid||``,onChange:n=>t(e.tag,`skid`,n.target.value),children:[(0,b.jsx)(`option`,{value:``,children:`-`}),n.map(e=>(0,b.jsx)(`option`,{value:e,children:e},e))]})}),(0,b.jsx)(`td`,{className:`px-1 py-1 w-20`,children:(0,b.jsxs)(`select`,{disabled:i,className:s,value:e.almacen||``,onChange:n=>t(e.tag,`almacen`,n.target.value),children:[(0,b.jsx)(`option`,{value:``,children:`-`}),r.map(e=>(0,b.jsx)(`option`,{value:e,children:e},e))]})}),(0,b.jsx)(`td`,{className:`px-1 py-1 text-center w-12`,children:(0,b.jsxs)(`select`,{disabled:i,className:s,value:e.aCalibrar||`0`,onChange:n=>t(e.tag,`aCalibrar`,n.target.value),children:[(0,b.jsx)(`option`,{value:`0`,children:`NO`}),(0,b.jsx)(`option`,{value:`1`,children:`SI`})]})}),(0,b.jsx)(`td`,{className:`px-1 py-1 w-12`,children:(0,b.jsx)(`input`,{disabled:i,type:`number`,className:o,value:e.cantRegTot,onChange:n=>t(e.tag,`cantRegTot`,n.target.value),placeholder:`0`})}),(0,b.jsx)(`td`,{className:`px-1 py-1 w-12`,children:(0,b.jsx)(`input`,{disabled:i,type:`number`,className:o,value:e.cantRegReal,onChange:n=>t(e.tag,`cantRegReal`,n.target.value),placeholder:`0`})}),(0,b.jsx)(`td`,{className:`px-2 py-1 text-center w-24`,children:(0,b.jsx)(`span`,{className:`text-[9px] font-bold px-1.5 py-0.5 rounded border ${e.calculatedStatus===`INSTALADO`?`text-green-700 bg-green-100 border-green-200`:e.calculatedStatus===`EN PROCESO`?`text-yellow-700 bg-yellow-100 border-yellow-200`:`text-slate-400 bg-slate-100 border-slate-200`}`,children:e.calculatedStatus})})]})}),S=({specialtyName:n,tags:r,onEdit:a,skidOptions:o,almacenOptions:s,isReadOnly:c})=>{let[l,u]=(0,y.useState)(!1),f=r.length,p=r.filter(e=>e.calculatedStatus===`INSTALADO`).length,m=Math.round(r.reduce((e,t)=>e+(parseInt(t.avCons)||0),0)/(f||1));Math.round(r.reduce((e,t)=>e+(parseInt(t.avQa)||0),0)/(f||1));let S=e=>{let t=r.map(t=>t[e]).filter(e=>e);return t.length>0?t.sort().pop():`-`},C=S(`fCons`);return S(`fRec`),(0,b.jsxs)(`div`,{className:`border border-slate-200 rounded mb-2 overflow-hidden bg-white shadow-sm`,children:[(0,b.jsxs)(`div`,{className:`flex justify-between items-center p-2 px-3 cursor-pointer bg-slate-50 hover:bg-slate-100 transition-colors`,onClick:()=>u(!l),children:[(0,b.jsxs)(`div`,{className:`flex items-center gap-2`,children:[l?(0,b.jsx)(i,{size:14,className:`text-slate-400`}):(0,b.jsx)(h,{size:14,className:`text-slate-400`}),(0,b.jsxs)(`span`,{className:`font-bold text-slate-700 text-xs flex items-center gap-2`,children:[{Instrumentación:(0,b.jsx)(e,{size:14,className:`text-blue-500`}),Electricidad:(0,b.jsx)(v,{size:14,className:`text-yellow-500`}),Mecánica:(0,b.jsx)(t,{size:14,className:`text-gray-500`}),Piping:(0,b.jsx)(_,{size:14,className:`text-indigo-500`}),Civil:(0,b.jsx)(g,{size:14,className:`text-orange-500`})}[n]||(0,b.jsx)(d,{size:14}),` `,n]})]}),(0,b.jsxs)(`div`,{className:`flex items-center gap-4 text-[10px] text-slate-500 font-medium`,children:[(0,b.jsxs)(`div`,{title:`Promedio Avance Construcción`,children:[`Av. Cons: `,(0,b.jsxs)(`span`,{className:`text-blue-600 font-bold`,children:[m,`%`]})]}),(0,b.jsxs)(`div`,{title:`Fecha Máxima Construcción`,children:[`F. Cons: `,(0,b.jsx)(`span`,{className:`text-slate-700`,children:C})]}),(0,b.jsxs)(`div`,{title:`Instalados`,children:[`Inst: `,(0,b.jsxs)(`span`,{className:`text-green-600 font-bold`,children:[p,`/`,f]})]})]})]}),l&&(0,b.jsx)(`div`,{className:`overflow-x-auto`,children:(0,b.jsxs)(`table`,{className:`w-full text-[10px] text-left`,children:[(0,b.jsx)(`thead`,{className:`bg-slate-100 text-slate-500 uppercase border-y border-slate-200`,children:(0,b.jsxs)(`tr`,{children:[(0,b.jsx)(`th`,{className:`px-4 py-2 font-semibold`,children:`TAG`}),(0,b.jsx)(`th`,{className:`px-4 py-2 font-semibold`,children:`Descripción`}),(0,b.jsx)(`th`,{className:`px-1 py-2 font-semibold text-center`,children:`Av. Cons`}),(0,b.jsx)(`th`,{className:`px-1 py-2 font-semibold text-center`,children:`F. Cons`}),(0,b.jsx)(`th`,{className:`px-1 py-2 font-semibold text-center`,children:`Av. QAQC`}),(0,b.jsx)(`th`,{className:`px-1 py-2 font-semibold text-center`,children:`F. QAQC`}),(0,b.jsx)(`th`,{className:`px-1 py-2 font-semibold text-center`,children:`F. Recorri`}),(0,b.jsx)(`th`,{className:`px-1 py-2 font-semibold text-center`,children:`F. Entreg`}),(0,b.jsx)(`th`,{className:`px-1 py-2 font-semibold`,children:`Skid`}),(0,b.jsx)(`th`,{className:`px-1 py-2 font-semibold`,children:`Almacén`}),(0,b.jsx)(`th`,{className:`px-1 py-2 font-semibold text-center`,children:`Calib?`}),(0,b.jsx)(`th`,{className:`px-1 py-2 font-semibold text-center`,children:`R. T`}),(0,b.jsx)(`th`,{className:`px-1 py-2 font-semibold text-center`,children:`R. R`}),(0,b.jsx)(`th`,{className:`px-2 py-2 font-semibold text-center`,children:`Estado`})]})}),(0,b.jsx)(`tbody`,{children:r.map(e=>(0,b.jsx)(x,{tagItem:e,onEdit:a,skidOptions:o,almacenOptions:s,isReadOnly:c},e.tag))})]})})]})},C=({sys:e,isExpanded:t,onToggle:n,onEdit:r,skidOptions:a,almacenOptions:o,isReadOnly:s})=>{let c=(0,y.useMemo)(()=>{let t={};return e.tags.forEach(e=>{let n=e.specialty||`Sin Especialidad`;t[n]||(t[n]=[]),t[n].push(e)}),t},[e.tags]);return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)(`tr`,{className:`bg-white hover:bg-blue-50 transition-colors border-b border-slate-100 cursor-pointer ${t?`bg-slate-50 border-l-4 border-l-blue-500`:``}`,onClick:n,children:[(0,b.jsxs)(`td`,{className:`px-6 py-4`,children:[(0,b.jsxs)(`div`,{className:`flex items-center gap-2 text-slate-500`,children:[t?(0,b.jsx)(i,{size:18}):(0,b.jsx)(h,{size:18}),(0,b.jsx)(`span`,{className:`font-medium text-slate-800 text-sm`,children:e.sistema})]}),(0,b.jsx)(`div`,{className:`text-xs text-slate-400 pl-6`,children:e.descSistema})]}),(0,b.jsxs)(`td`,{className:`px-6 py-4`,children:[(0,b.jsx)(`div`,{className:`font-medium text-slate-700 text-sm`,children:e.subsistema}),(0,b.jsx)(`div`,{className:`text-xs text-slate-400`,children:e.descSubsistema})]}),(0,b.jsxs)(`td`,{className:`px-2 py-4 text-center text-xs text-slate-600`,children:[e.stats.avgAvCons,`%`]}),(0,b.jsx)(`td`,{className:`px-2 py-4 text-center text-xs text-slate-600 whitespace-nowrap`,children:e.stats.maxFCons}),(0,b.jsxs)(`td`,{className:`px-2 py-4 text-center text-xs text-slate-600`,children:[e.stats.avgAvQa,`%`]}),(0,b.jsx)(`td`,{className:`px-2 py-4 text-center text-xs text-slate-600 whitespace-nowrap`,children:e.stats.maxFQa}),(0,b.jsx)(`td`,{className:`px-2 py-4 text-center text-xs text-slate-600 whitespace-nowrap`,children:e.stats.maxFRec}),(0,b.jsx)(`td`,{className:`px-2 py-4 text-center text-xs text-slate-600 whitespace-nowrap font-bold text-blue-700`,children:e.stats.maxFEnt}),(0,b.jsx)(`td`,{className:`px-6 py-4 text-center font-bold text-slate-700 text-sm`,children:e.totalTags}),(0,b.jsx)(`td`,{className:`px-6 py-4 text-center`,children:(0,b.jsx)(`span`,{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-bold ${e.mountedTags>0?`bg-green-100 text-green-800`:`bg-slate-100 text-slate-500`}`,children:e.mountedTags})}),(0,b.jsxs)(`td`,{className:`px-6 py-4 text-center`,children:[(0,b.jsxs)(`div`,{className:`text-xs font-bold text-slate-600`,children:[e.percent,`%`]}),(0,b.jsx)(`div`,{className:`w-full bg-gray-200 rounded-full h-1 mt-1`,children:(0,b.jsx)(`div`,{className:`bg-blue-600 h-1 rounded-full`,style:{width:`${e.percent}%`}})})]})]}),t&&(0,b.jsx)(`tr`,{children:(0,b.jsx)(`td`,{colSpan:`11`,className:`p-4 bg-slate-50 border-b border-slate-200 shadow-inner`,children:(0,b.jsxs)(`div`,{className:`pl-6`,children:[(0,b.jsxs)(`h4`,{className:`text-xs font-bold text-slate-400 uppercase mb-3 flex items-center gap-2 tracking-wider`,children:[(0,b.jsx)(m,{size:14}),` Detalle por Especialidad (ABM)`]}),Object.keys(c).sort().map(e=>(0,b.jsx)(S,{specialtyName:e,tags:c[e],onEdit:r,skidOptions:a,almacenOptions:o,isReadOnly:s},e))]})})})]})},w=()=>{let{matrix:i,edits:o,loading:s,saveData:c}=f(),{user:u,access:m}=a(),[h,x]=(0,y.useState)({}),[S,w]=(0,y.useState)({key:`sistema`,direction:`asc`}),T=(0,y.useMemo)(()=>{if(!i)return{skids:[],almacenes:[]};let e=new Set,t=new Set;return i.forEach(n=>{n.skid?.trim()&&e.add(n.skid.trim()),n.almacen?.trim()&&t.add(n.almacen.trim())}),t.add(`EN OBRA`),{skids:Array.from(e).sort(),almacenes:Array.from(t).sort()}},[i]),E=(0,y.useCallback)((e,t)=>{let n=p.safeParseInt(t?.cantRegTot??e.cantRegTot),r=p.safeParseInt(t?.cantRegReal??e.cantRegReal);return n>0&&r>=n?`INSTALADO`:r>0&&r<n?`EN PROCESO`:`PENDIENTE`},[]),D=(0,y.useMemo)(()=>{if(!i)return{systems:[],globalProgress:0,totalTagsScope:0,registryStats:{total:0,real:0},specialtyStats:[]};let n={},r=0,a={I:0,E:0,P:0,M:0,C:0},s={...a},c=0,l=0;i.forEach(e=>{if((e.estado1||``).toUpperCase().includes(`ELIMINA`))return;let t=o?.[e.tag]||{},i=p.safeParseInt(t?.cantRegTot??e.cantRegTot),u=p.safeParseInt(t?.cantRegReal??e.cantRegReal);c+=i,l+=u;let d=E(e,t),f=d===`INSTALADO`,m=`${e.sistema||`000`}|${e.subsistema||`000`}`,h=e.sistema||``,g=e.subsistema||``,_=p.safeParseInt(t.avCons??e.avCons),v=p.safeParseInt(t.avQa??e.avQa),y=t.fCons??e.fCons,b=t.fQa??e.fQa,x=t.fRec??e.fRec,S=t.fEnt??e.fEnt;n[m]||(n[m]={id:m,sistema:`${e.sistema} - ${e.descSistema}`,descSistema:e.descSistema,subsistema:`${e.subsistema} - ${e.descSubsistema}`,descSubsistema:e.descSubsistema,totalTags:0,mountedTags:0,inProcessTags:0,tags:[],rawSys:h,rawSub:g,sumAvCons:0,sumAvQa:0,datesFCons:[],datesFQa:[],datesFRec:[],datesFEnt:[]});let C=n[m];C.totalTags++,f&&C.mountedTags++,d===`EN PROCESO`&&C.inProcessTags++,C.sumAvCons+=_,C.sumAvQa+=v,y&&C.datesFCons.push(y),b&&C.datesFQa.push(b),x&&C.datesFRec.push(x),S&&C.datesFEnt.push(S),C.tags.push({tag:e.tag,desc:e.descripcion,specialty:e.especialidad,calculatedStatus:d,skid:t?.skid??e.skid,almacen:t?.almacen??e.almacen,aCalibrar:t?.aCalibrar??e.aCalibrar,cantRegTot:t?.cantRegTot??e.cantRegTot,cantRegReal:t?.cantRegReal??e.cantRegReal,avCons:_,avQa:v,fCons:y,fQa:b,fRec:x,fEnt:S}),r++;let w=(e.especialidad||``).toUpperCase(),T=null;w.includes(`INSTRUMENT`)||w.includes(`(I)`)?T=`I`:w.includes(`ELECTRIC`)||w.includes(`(E)`)?T=`E`:w.includes(`PIPING`)||w.includes(`(P)`)?T=`P`:w.includes(`MEC`)||w.includes(`(M)`)?T=`M`:(w.includes(`CIVIL`)||w.includes(`(C)`))&&(T=`C`),T&&(s[T]+=i,a[T]+=u)});let u=c>0?(l/c*100).toFixed(2):`0.00`;return{systems:Object.values(n).map(e=>{let t=e.totalTags||1,n=e=>e.length>0?e.sort().pop():`-`;return{...e,percent:(e.mountedTags/t*100).toFixed(1),stats:{avgAvCons:Math.round(e.sumAvCons/t),avgAvQa:Math.round(e.sumAvQa/t),maxFCons:n(e.datesFCons),maxFQa:n(e.datesFQa),maxFRec:n(e.datesFRec),maxFEnt:n(e.datesFEnt)}}}).sort((e,t)=>{let n,r;switch(S.key){case`avCons`:n=e.stats.avgAvCons,r=t.stats.avgAvCons;break;case`fCons`:n=e.stats.maxFCons,r=t.stats.maxFCons;break;case`fEnt`:n=e.stats.maxFEnt,r=t.stats.maxFEnt;break;case`avance`:n=parseFloat(e.percent),r=parseFloat(t.percent);break;default:let i=String(e.rawSys||``).substring(0,3),a=String(t.rawSys||``).substring(0,3),o=i.localeCompare(a,void 0,{numeric:!0,sensitivity:`base`});if(o!==0)return o;n=String(e.rawSub||``).substring(0,2),r=String(t.rawSub||``).substring(0,2)}return n<r?S.direction===`asc`?-1:1:n>r?S.direction===`asc`?1:-1:0}),globalProgress:u,totalTagsScope:r,registryStats:{total:c,real:l},specialtyStats:[{label:`Instrumentación (I)`,val:a.I,tot:s.I,color:`#3b82f6`,icon:e},{label:`Electricidad (E)`,val:a.E,tot:s.E,color:`#eab308`,icon:v},{label:`Piping (P)`,val:a.P,tot:s.P,color:`#6366f1`,icon:_},{label:`Mecánica (M)`,val:a.M,tot:s.M,color:`#64748b`,icon:t},{label:`Civil (C)`,val:a.C,tot:s.C,color:`#f97316`,icon:g}]}},[i,o,E,S]),O=(e,t,n)=>{if(!m.canEdit)return;let r={...o},a={...r[e]||{},[t]:n};if(t===`cantRegReal`){let t=i.find(t=>t.tag===e),r=p.safeParseInt(a.cantRegTot??(t?.cantRegTot||0));r>0&&p.safeParseInt(n)>=r&&(a.almacen=`EN OBRA`)}r[e]=a,c(null,null,r,null,u.email)},k=e=>{w(t=>({key:e,direction:t.key===e&&t.direction===`asc`?`desc`:`asc`}))};return s&&(!i||i.length===0)?(0,b.jsx)(`div`,{className:`flex h-64 justify-center items-center`,children:(0,b.jsx)(l,{className:`animate-spin text-blue-500`})}):!i||i.length===0?(0,b.jsxs)(`div`,{className:`flex flex-col items-center justify-center h-96 bg-white rounded-lg border border-dashed border-slate-300`,children:[(0,b.jsx)(d,{className:`w-16 h-16 text-slate-300 mb-4`}),(0,b.jsx)(`h3`,{className:`text-lg font-medium text-slate-500`,children:`No hay datos de matriz ABM`}),(0,b.jsx)(`p`,{className:`text-sm text-slate-400 mt-2`,children:`Carga un archivo "Matriz ABM" usando el botón superior derecho.`})]}):(0,b.jsxs)(`div`,{children:[(0,b.jsx)(`div`,{className:`grid grid-cols-1 md:grid-cols-5 gap-4 mb-6`,children:D.specialtyStats.map(e=>(0,b.jsx)(r,{title:e.label,value:`${e.val}/${e.tot}`,icon:e.icon,color:e.color,compact:!0,percentage:e.tot>0?e.val/e.tot*100:0},e.label))}),(0,b.jsxs)(`div`,{className:`grid grid-cols-1 md:grid-cols-4 gap-4 mb-8`,children:[(0,b.jsxs)(`div`,{className:`bg-white p-4 rounded-lg shadow border-l-4 border-purple-500`,children:[(0,b.jsx)(`h3`,{className:`text-sm font-medium text-gray-500 uppercase`,children:`Subsistemas`}),(0,b.jsx)(`p`,{className:`text-3xl font-bold text-gray-800`,children:D.systems.length})]}),(0,b.jsxs)(`div`,{className:`bg-white p-4 rounded-lg shadow border-l-4 border-blue-500`,children:[(0,b.jsx)(`h3`,{className:`text-sm font-medium text-gray-500 uppercase`,children:`Total Tags`}),(0,b.jsx)(`p`,{className:`text-3xl font-bold text-gray-800`,children:D.totalTagsScope})]}),(0,b.jsxs)(`div`,{className:`bg-white p-4 rounded-lg shadow border-l-4 border-cyan-500`,children:[(0,b.jsx)(`h3`,{className:`text-sm font-medium text-gray-500 uppercase`,children:`Total Registros`}),(0,b.jsxs)(`div`,{className:`flex flex-col`,children:[(0,b.jsxs)(`p`,{className:`text-3xl font-bold text-gray-800`,children:[D.registryStats.real,` `,(0,b.jsxs)(`span`,{className:`text-lg text-gray-400 font-normal`,children:[` / `,D.registryStats.total]})]}),(0,b.jsx)(`div`,{className:`w-full bg-slate-100 rounded-full h-1.5 mt-2`,children:(0,b.jsx)(`div`,{className:`h-1.5 rounded-full bg-cyan-500 transition-all duration-500`,style:{width:`${D.registryStats.total>0?D.registryStats.real/D.registryStats.total*100:0}%`}})})]})]}),(0,b.jsxs)(`div`,{className:`bg-white p-4 rounded-lg shadow border-l-4 border-green-600`,children:[(0,b.jsx)(`h3`,{className:`text-sm font-medium text-gray-500 uppercase`,children:`Avance Global`}),(0,b.jsxs)(`p`,{className:`text-3xl font-bold text-gray-800 flex items-center gap-2`,children:[D.globalProgress,`% `,(0,b.jsx)(e,{size:20,className:`text-green-500`})]})]})]}),(0,b.jsx)(`div`,{className:`bg-white rounded shadow overflow-hidden border border-slate-200`,children:(0,b.jsxs)(`table`,{className:`w-full text-sm text-left`,children:[(0,b.jsx)(`thead`,{className:`bg-slate-100 text-slate-700 uppercase text-xs`,children:(0,b.jsxs)(`tr`,{children:[(0,b.jsxs)(`th`,{className:`px-6 py-3 cursor-pointer hover:bg-slate-200`,onClick:()=>k(`sistema`),children:[`Sistema `,S.key===`sistema`&&(0,b.jsx)(n,{size:10,className:`inline`})]}),(0,b.jsx)(`th`,{className:`px-6 py-3`,children:`Subsistema`}),(0,b.jsxs)(`th`,{className:`px-2 py-3 text-center cursor-pointer hover:bg-slate-200`,onClick:()=>k(`avCons`),children:[`Av. Cons `,S.key===`avCons`&&(0,b.jsx)(n,{size:10,className:`inline`})]}),(0,b.jsxs)(`th`,{className:`px-2 py-3 text-center cursor-pointer hover:bg-slate-200`,onClick:()=>k(`fCons`),children:[`F. Cons `,S.key===`fCons`&&(0,b.jsx)(n,{size:10,className:`inline`})]}),(0,b.jsx)(`th`,{className:`px-2 py-3 text-center`,children:`Av. QAQC`}),(0,b.jsx)(`th`,{className:`px-2 py-3 text-center`,children:`F. QAQC`}),(0,b.jsx)(`th`,{className:`px-2 py-3 text-center`,children:`F. Rec`}),(0,b.jsxs)(`th`,{className:`px-2 py-3 text-center cursor-pointer hover:bg-slate-200`,onClick:()=>k(`fEnt`),children:[`F. Ent `,S.key===`fEnt`&&(0,b.jsx)(n,{size:10,className:`inline`})]}),(0,b.jsx)(`th`,{className:`px-6 py-3 text-center`,children:`Total`}),(0,b.jsx)(`th`,{className:`px-6 py-3 text-center`,children:`Inst.`}),(0,b.jsxs)(`th`,{className:`px-6 py-3 text-center cursor-pointer hover:bg-slate-200`,onClick:()=>k(`avance`),children:[`Avance `,S.key===`avance`&&(0,b.jsx)(n,{size:10,className:`inline`})]})]})}),(0,b.jsx)(`tbody`,{className:`divide-y divide-slate-100`,children:D.systems.map(e=>(0,b.jsx)(C,{sys:e,isExpanded:h[e.id],onToggle:()=>x(t=>({...t,[e.id]:!t[e.id]})),onEdit:O,skidOptions:T.skids,almacenOptions:T.almacenes,isReadOnly:!m.canEdit},e.id))})]})})]})};export{w as default};